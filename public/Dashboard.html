<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="./bootstrap-5.2.2-dist/css/bootstrap.css">
      <link rel="stylesheet" href="./bootstrap-5.2.2-dist/js/bootstrap.bundle.js">
      <title>Your Dashboard</title>
  </head>
  <body class="" style="background-image: url(./Capture.JPG); background-repeat: no-repeat; background-size: 200vh;">

    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
          <a class="navbar-brand fs-2" href="#" style="color: #0056D2;">Sapphire</a>
          <form class="d-flex" role="search">
            <!-- <button class="btn p-1 btn-primary me-2" type="submit">Explore</button> -->
            <input class="form-control me-2 " type="search" placeholder="Search...">
          </form>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" >
          <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item dropdown"><a class="nav-link dropdown-toggle hover-dropdown active " role="button" 
                  data-bs-toggle="dropdown" aria-expanded="false">Online Banking</a>
                  <ul class="dropdown-menu">
                  <li onmouseover="hover()"><a class="dropdown-item" href="#"><b>Online Banking</b><br>Explore...</a></li>
                  <li onmouseover="hover()"><a class="dropdown-item" href="#"><b>Online Banking</b><br>Master Track <sup style="font-size: 8px;"><b>TM</b></sup></a></li>
                  <li onmouseover="hover()"><a class="dropdown-item" href="#"><b>Fast and Easy Transfers</b><br>Advance your shopping experience here...</a></li>
                  </ul>
                </li>
                <li class="nav-item"><a class="nav-link active" href="#">For Enterprise</a></li>
                <li class="nav-item"><a class="nav-link active" href="#">For Students</a></li>
                <li class="nav-item d-flex" href="index.html">
                <button class="btn btn-info text-light border border-2" onclick="back()" id="logOut">Home</button>
                </li>
            </ul>
          </div>
      </div>
    </nav>

    <section>
      <div class="container-fluid shadow-lg ms-auto me-3 row col-10 col-lg-4 my-3 bg-secondary bg-opacity-10 border border-info 
        border-5 rounded rounded-5 p-3 text-info" id="disp" style="height: 50vh;">
        <h2>
          Welcome To Your Dashboard!!! üòÅ
        </h2>
      </div>
    </section>
    <!-- <hr> -->
    <!-- <table class="table table-striped border" id="x">
        <tr>
            <th> S/N </th>
            <th> User Name </th>
            <th> Email </th>
            <th> Currency </th>
            <th> Balance </th>
        </tr>
    </table> -->
      

    <script>
        var allUsers = JSON.parse(localStorage.getItem
        ('localUsers'))

        var userIndex = localStorage.getItem('currentUserIndex')
        console.log(userIndex) 
        // disp.innerHTML +=
        // `
        // 
        // `
        myTable.innerHTML +=
          `
            <tr>
                <td>${userIndex+1}</td>
                <td>${allUsers[userIndex].userName}</td>
                <td>${allUsers[userIndex].email}</td>
                <td>${allUsers[userIndex].currency}</td>
                <td>$0.00</td>
            </tr>
          `     
        const back = ()=>{
        window.location.href = "index.html"
        }
        
    </script>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-app.js";
      import {GoogleAuthProvider, signOut} from"https://www.gstatic.com/firebasejs/9.16.0/firebase-auth.js"
      import {getStorage, ref as stRef, uploadBytesResumable} from"https://www.gstatic.com/firebasejs/9.16.0/firebase-auth.js"

        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
    
        // Your web app's Firebase configuration
        const firebaseConfig = {
        apiKey: "AIzaSyAKypBL3o1DTl6BbIbG4XWbpqp0V42e3ZI",
        authDomain: "portal-756b6.firebaseapp.com",
        projectId: "portal-756b6",
        storageBucket: "portal-756b6.appspot.com",
        messagingSenderId: "265106853012",
        appId: "1:265106853012:web:8f2566df091a146c39b881"
        };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth()
        const db = getDatabase()
        userIndex = 0
        const dbRef = ref(db,`todo/${userIndex}`)
        onAuthStateChange(auth,(user)=>{
          if(user){
            console.log(user)
            disp.innerHTML += 
            `
            <h1> Welcome ${user.displayName}</h1>
            `
          } else{
            window.location.href = "index.html"
          }
          logOutBtn.addEventListener("click",()=>{
            signOut(auth).then(()=>{
              console.log("Signed out successfully!!!üòÅ")
            })
          })
            set(dbRef,todo)
            console.log(currentUserIndex)
          })
          onValue(ref(db,"todo"),(snapshot)=>{
            console.log(snapshot.val())
            userIndex = allUsers.length
            allUsers.map((userIndex)=>{
              console.log(userIndex)
            })
          })
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" 
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" 
      integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" crossorigin="anonymous">
    </script>
  </body>
</html>